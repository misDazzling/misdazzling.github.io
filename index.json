[{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"import urllib.request import gzip import io from lxml import etree import json import jsonpath # 1.è·å–ç½‘é¡µæºç  # è¯·æ±‚åœ°å€ url = \u0026#39;https://www.bilibili.com/video/BV1Es4y1q7Bf/?spm_id_from=333.788.comment.all.click\u0026amp;vd_source=3f0b4e269bbcd37b2419b130c0a77513\u0026#39; # è¯·æ±‚å¤´ headers = { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36\u0026#39;, \u0026#39;Referer\u0026#39;: \u0026#39;https://www.bilibili.com/\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\u0026#39;, \u0026#39;Accept-Language\u0026#39;: \u0026#39;en-US,en;q=0.5\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39;, \u0026#39;Upgrade-Insecure-Requests\u0026#39;: \u0026#39;1\u0026#39;, \u0026#39;TE\u0026#39;: \u0026#39;Trailers\u0026#39; } # è¯·æ±‚å¯¹è±¡å®šåˆ¶ request = urllib.request.Request(url=url, headers=headers) # æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ response = urllib.request.urlopen(request) # è¯»å–å“åº”çš„å†…å®¹ content_bytes = response.read() # ä»å“åº”ä¸­è¯»å–çš„å­—èŠ‚æ•°æ® # å“åº”å†…å®¹æ˜¯å‹ç¼©çš„ï¼Œéœ€è¦è§£å‹ï¼Œå°†å‹ç¼©çš„å­—èŠ‚æ•°æ®è§£å‹å¹¶è§£ç æˆUTF-8ç¼–ç çš„å­—ç¬¦ä¸² content_io = io.BytesIO(content_bytes) # åˆ›å»ºäº†ä¸€ä¸ªio.BytesIOå¯¹è±¡ï¼Œç”¨äºå°†å­—èŠ‚æ•°æ®åŒ…è£…æˆç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„å½¢å¼ # ä½¿ç”¨gzip.GzipFileæ¥è§£å‹ç¼©æ•°æ®ï¼Œmode=\u0026#39;rb\u0026#39;æŒ‡å®šä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å– with gzip.GzipFile(fileobj=content_io, mode=\u0026#39;rb\u0026#39;) as f: content = f.read().decode(\u0026#39;utf-8\u0026#39;) # # å°†ç½‘é¡µæºç ä¿å­˜åˆ°æ–‡ä»¶â€œbç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.htmlâ€ä¸­ with open(\u0026#39;bç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.html\u0026#39;, \u0026#39;w\u0026#39;, encoding=\u0026#39;UTF-8\u0026#39;) as fp: fp.write(content) # 2.è·å–è§†é¢‘æ ‡é¢˜å’Œæ—¶é•¿ # ï¼ˆ1ï¼‰å¤„ç†å˜æˆjsonæ•°æ® # è§£ææœåŠ¡å™¨å“åº”çš„æ–‡ä»¶ etree.HTML tree = etree.HTML(content) # è·å–æƒ³è¦çš„æ•°æ® the_data = tree.xpath(\u0026#39;/html/head[@itemprop=\u0026#34;video\u0026#34;]/script[5]/text()\u0026#39;)[0] # ç”±äºtree.xpathè¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨åˆ‡ç‰‡[0]å°†å®ƒå–å‡ºæ¥ the_json_data = the_data.split(\u0026#39;__=\u0026#39;)[1].split(\u0026#39;;(function\u0026#39;)[0] # ï¼ˆ2ï¼‰å¤„ç†jsonæ•°æ®ï¼Œå¾—åˆ°è§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ # ä½¿ç”¨jsonpathè§£æ video_data = json.loads(the_json_data) pages = video_data[\u0026#39;videoData\u0026#39;][\u0026#39;pages\u0026#39;] # 3. å®šä¹‰ä¸€ä¸ªè½¬æ¢ç§’æ•°ä¸ºåˆ†:ç§’æ ¼å¼çš„å‡½æ•° def convert_seconds_to_minutes_seconds_format(seconds): minutes = seconds // 60 seconds = seconds % 60 return f\u0026#34;{minutes:02}:{seconds:02}\u0026#34; # 4. æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ï¼Œå¹¶ç´¯åŠ æ€»æ—¶é•¿ total_duration_seconds = 0 # ç”¨äºç´¯åŠ æ€»æ—¶é•¿ for page in pages: title = page[\u0026#39;part\u0026#39;] # è·å–è§†é¢‘çš„æ ‡é¢˜ duration = page[\u0026#39;duration\u0026#39;] # è·å–è§†é¢‘çš„æ—¶é•¿ï¼ˆå•ä½ä¸ºç§’ï¼‰ # è½¬æ¢æ—¶é•¿ä¸ºåˆ†:ç§’æ ¼å¼ formatted_duration = convert_seconds_to_minutes_seconds_format(duration) # æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ—¶é•¿ print(f\u0026#34;æ ‡é¢˜: {title}, æ—¶é•¿: {formatted_duration}\u0026#34;) #print(formatted_duration) # ç´¯åŠ æ—¶é•¿ total_duration_seconds += duration def convert_seconds_to_time_format(seconds): # è®¡ç®—å°æ—¶ hours = seconds // 3600 # è®¡ç®—åˆ†é’Ÿ minutes = (seconds % 3600) // 60 # è®¡ç®—å‰©ä½™ç§’æ•° seconds = seconds % 60 # è¿”å›æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å°æ—¶ã€åˆ†é’Ÿã€ç§’éƒ½æ˜¯ä¸¤ä½æ•° return f\u0026#34;{hours:02}:{minutes:02}:{seconds:02}\u0026#34; # 5. è®¡ç®—æ€»æ—¶é•¿å¹¶è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼ total_formatted_duration = convert_seconds_to_time_format(total_duration_seconds) print(f\u0026#34;\\næ‰€æœ‰è§†é¢‘çš„æ€»æ—¶é•¿: {total_formatted_duration}\u0026#34;) ","date":"1 March 2025","externalUrl":null,"permalink":"/en/posts/crawl-the-duration-and-title-of-bilibili-videos/","section":"Posts","summary":"","title":"Crawl the duration and title of Bilibili videos","type":"posts"},{"content":"import urllib.request import gzip import io from lxml import etree import json import jsonpath # 1.è·å–ç½‘é¡µæºç  # è¯·æ±‚åœ°å€ url = \u0026#39;https://www.bilibili.com/video/BV1Es4y1q7Bf/?spm_id_from=333.788.comment.all.click\u0026amp;vd_source=3f0b4e269bbcd37b2419b130c0a77513\u0026#39; # è¯·æ±‚å¤´ headers = { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36\u0026#39;, \u0026#39;Referer\u0026#39;: \u0026#39;https://www.bilibili.com/\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\u0026#39;, \u0026#39;Accept-Language\u0026#39;: \u0026#39;en-US,en;q=0.5\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39;, \u0026#39;Upgrade-Insecure-Requests\u0026#39;: \u0026#39;1\u0026#39;, \u0026#39;TE\u0026#39;: \u0026#39;Trailers\u0026#39; } # è¯·æ±‚å¯¹è±¡å®šåˆ¶ request = urllib.request.Request(url=url, headers=headers) # æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ response = urllib.request.urlopen(request) # è¯»å–å“åº”çš„å†…å®¹ content_bytes = response.read() # ä»å“åº”ä¸­è¯»å–çš„å­—èŠ‚æ•°æ® # å“åº”å†…å®¹æ˜¯å‹ç¼©çš„ï¼Œéœ€è¦è§£å‹ï¼Œå°†å‹ç¼©çš„å­—èŠ‚æ•°æ®è§£å‹å¹¶è§£ç æˆUTF-8ç¼–ç çš„å­—ç¬¦ä¸² content_io = io.BytesIO(content_bytes) # åˆ›å»ºäº†ä¸€ä¸ªio.BytesIOå¯¹è±¡ï¼Œç”¨äºå°†å­—èŠ‚æ•°æ®åŒ…è£…æˆç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„å½¢å¼ # ä½¿ç”¨gzip.GzipFileæ¥è§£å‹ç¼©æ•°æ®ï¼Œmode=\u0026#39;rb\u0026#39;æŒ‡å®šä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å– with gzip.GzipFile(fileobj=content_io, mode=\u0026#39;rb\u0026#39;) as f: content = f.read().decode(\u0026#39;utf-8\u0026#39;) # # å°†ç½‘é¡µæºç ä¿å­˜åˆ°æ–‡ä»¶â€œbç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.htmlâ€ä¸­ with open(\u0026#39;bç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.html\u0026#39;, \u0026#39;w\u0026#39;, encoding=\u0026#39;UTF-8\u0026#39;) as fp: fp.write(content) # 2.è·å–è§†é¢‘æ ‡é¢˜å’Œæ—¶é•¿ # ï¼ˆ1ï¼‰å¤„ç†å˜æˆjsonæ•°æ® # è§£ææœåŠ¡å™¨å“åº”çš„æ–‡ä»¶ etree.HTML tree = etree.HTML(content) # è·å–æƒ³è¦çš„æ•°æ® the_data = tree.xpath(\u0026#39;/html/head[@itemprop=\u0026#34;video\u0026#34;]/script[5]/text()\u0026#39;)[0] # ç”±äºtree.xpathè¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨åˆ‡ç‰‡[0]å°†å®ƒå–å‡ºæ¥ the_json_data = the_data.split(\u0026#39;__=\u0026#39;)[1].split(\u0026#39;;(function\u0026#39;)[0] # ï¼ˆ2ï¼‰å¤„ç†jsonæ•°æ®ï¼Œå¾—åˆ°è§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ # ä½¿ç”¨jsonpathè§£æ video_data = json.loads(the_json_data) pages = video_data[\u0026#39;videoData\u0026#39;][\u0026#39;pages\u0026#39;] # 3. å®šä¹‰ä¸€ä¸ªè½¬æ¢ç§’æ•°ä¸ºåˆ†:ç§’æ ¼å¼çš„å‡½æ•° def convert_seconds_to_minutes_seconds_format(seconds): minutes = seconds // 60 seconds = seconds % 60 return f\u0026#34;{minutes:02}:{seconds:02}\u0026#34; # 4. æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ï¼Œå¹¶ç´¯åŠ æ€»æ—¶é•¿ total_duration_seconds = 0 # ç”¨äºç´¯åŠ æ€»æ—¶é•¿ for page in pages: title = page[\u0026#39;part\u0026#39;] # è·å–è§†é¢‘çš„æ ‡é¢˜ duration = page[\u0026#39;duration\u0026#39;] # è·å–è§†é¢‘çš„æ—¶é•¿ï¼ˆå•ä½ä¸ºç§’ï¼‰ # è½¬æ¢æ—¶é•¿ä¸ºåˆ†:ç§’æ ¼å¼ formatted_duration = convert_seconds_to_minutes_seconds_format(duration) # æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ—¶é•¿ print(f\u0026#34;æ ‡é¢˜: {title}, æ—¶é•¿: {formatted_duration}\u0026#34;) #print(formatted_duration) # ç´¯åŠ æ—¶é•¿ total_duration_seconds += duration def convert_seconds_to_time_format(seconds): # è®¡ç®—å°æ—¶ hours = seconds // 3600 # è®¡ç®—åˆ†é’Ÿ minutes = (seconds % 3600) // 60 # è®¡ç®—å‰©ä½™ç§’æ•° seconds = seconds % 60 # è¿”å›æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å°æ—¶ã€åˆ†é’Ÿã€ç§’éƒ½æ˜¯ä¸¤ä½æ•° return f\u0026#34;{hours:02}:{minutes:02}:{seconds:02}\u0026#34; # 5. è®¡ç®—æ€»æ—¶é•¿å¹¶è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼ total_formatted_duration = convert_seconds_to_time_format(total_duration_seconds) print(f\u0026#34;\\næ‰€æœ‰è§†é¢‘çš„æ€»æ—¶é•¿: {total_formatted_duration}\u0026#34;) ","date":"1 March 2025","externalUrl":null,"permalink":"/en/posts/other/crawl-the-duration-and-title-of-bilibili-videos/","section":"Posts","summary":"","title":"Crawl the duration and title of Bilibili videos","type":"posts"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/en/categories/other/","section":"Categories","summary":"","title":"Other","type":"categories"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/en/tags/spider/","section":"Tags","summary":"","title":"Spider","type":"tags"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":" æˆ‘æ˜¯ä¸€åè®¡ç®—æœºä¸“ä¸š, å…·èº«æ™ºèƒ½æ–¹å‘çš„åœ¨è¯»ç¡•å£«ç ”ç©¶ç”Ÿï¼Œ\nä»¥æœºæ¢°è‡‚ä»¿çœŸå¼€å‘ã€å¤§æ¨¡å‹é«˜å±‚ä»»åŠ¡è§„åˆ’ä¸ºä¸»ï¼Œ\næœ‰æ—¶ä¹Ÿä¼šå†™ä¸‹ä¸€äº›æˆ‘çš„æ‚è°ˆä¸éšæƒ³ã€‚\nç¬”è®°ä¸»è¦åœ¨è¯­é›€å¹³å°è®°å½•ï¼Œæ¬¢è¿å…³æ³¨å¯¼èˆªæ æˆ‘çš„ç›¸å…³è”ç³»æ–¹å¼ã€‚\nä½ å¯ä»¥åœ¨ about me äº†è§£æ›´å¤šå…³äºæˆ‘çš„ä¿¡æ¯ã€‚\n","date":"1 March 2025","externalUrl":null,"permalink":"/","section":"æ¬¢è¿æ¥åˆ° Blowfish! ğŸ‰","summary":"","title":"æ¬¢è¿æ¥åˆ° Blowfish! ğŸ‰","type":"page"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/tags/%E7%88%AC%E8%99%AB/","section":"Tags","summary":"","title":"çˆ¬è™«","type":"tags"},{"content":" ä»£ç  # import urllib.request import gzip import io from lxml import etree import json import jsonpath # 1.è·å–ç½‘é¡µæºç  # è¯·æ±‚åœ°å€ url = \u0026#39;https://www.bilibili.com/video/BV1Es4y1q7Bf/?spm_id_from=333.788.comment.all.click\u0026amp;vd_source=3f0b4e269bbcd37b2419b130c0a77513\u0026#39; # è¯·æ±‚å¤´ headers = { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36\u0026#39;, \u0026#39;Referer\u0026#39;: \u0026#39;https://www.bilibili.com/\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\u0026#39;, \u0026#39;Accept-Language\u0026#39;: \u0026#39;en-US,en;q=0.5\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39;, \u0026#39;Upgrade-Insecure-Requests\u0026#39;: \u0026#39;1\u0026#39;, \u0026#39;TE\u0026#39;: \u0026#39;Trailers\u0026#39; } # è¯·æ±‚å¯¹è±¡å®šåˆ¶ request = urllib.request.Request(url=url, headers=headers) # æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ response = urllib.request.urlopen(request) # è¯»å–å“åº”çš„å†…å®¹ content_bytes = response.read() # ä»å“åº”ä¸­è¯»å–çš„å­—èŠ‚æ•°æ® # å“åº”å†…å®¹æ˜¯å‹ç¼©çš„ï¼Œéœ€è¦è§£å‹ï¼Œå°†å‹ç¼©çš„å­—èŠ‚æ•°æ®è§£å‹å¹¶è§£ç æˆUTF-8ç¼–ç çš„å­—ç¬¦ä¸² content_io = io.BytesIO(content_bytes) # åˆ›å»ºäº†ä¸€ä¸ªio.BytesIOå¯¹è±¡ï¼Œç”¨äºå°†å­—èŠ‚æ•°æ®åŒ…è£…æˆç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„å½¢å¼ # ä½¿ç”¨gzip.GzipFileæ¥è§£å‹ç¼©æ•°æ®ï¼Œmode=\u0026#39;rb\u0026#39;æŒ‡å®šä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å– with gzip.GzipFile(fileobj=content_io, mode=\u0026#39;rb\u0026#39;) as f: content = f.read().decode(\u0026#39;utf-8\u0026#39;) # # å°†ç½‘é¡µæºç ä¿å­˜åˆ°æ–‡ä»¶â€œbç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.htmlâ€ä¸­ with open(\u0026#39;bç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.html\u0026#39;, \u0026#39;w\u0026#39;, encoding=\u0026#39;UTF-8\u0026#39;) as fp: fp.write(content) # 2.è·å–è§†é¢‘æ ‡é¢˜å’Œæ—¶é•¿ # ï¼ˆ1ï¼‰å¤„ç†å˜æˆjsonæ•°æ® # è§£ææœåŠ¡å™¨å“åº”çš„æ–‡ä»¶ etree.HTML tree = etree.HTML(content) # è·å–æƒ³è¦çš„æ•°æ® the_data = tree.xpath(\u0026#39;/html/head[@itemprop=\u0026#34;video\u0026#34;]/script[5]/text()\u0026#39;)[0] # ç”±äºtree.xpathè¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨åˆ‡ç‰‡[0]å°†å®ƒå–å‡ºæ¥ the_json_data = the_data.split(\u0026#39;__=\u0026#39;)[1].split(\u0026#39;;(function\u0026#39;)[0] # ï¼ˆ2ï¼‰å¤„ç†jsonæ•°æ®ï¼Œå¾—åˆ°è§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ # ä½¿ç”¨jsonpathè§£æ video_data = json.loads(the_json_data) pages = video_data[\u0026#39;videoData\u0026#39;][\u0026#39;pages\u0026#39;] # 3. å®šä¹‰ä¸€ä¸ªè½¬æ¢ç§’æ•°ä¸ºåˆ†:ç§’æ ¼å¼çš„å‡½æ•° def convert_seconds_to_minutes_seconds_format(seconds): minutes = seconds // 60 seconds = seconds % 60 return f\u0026#34;{minutes:02}:{seconds:02}\u0026#34; # 4. æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ï¼Œå¹¶ç´¯åŠ æ€»æ—¶é•¿ total_duration_seconds = 0 # ç”¨äºç´¯åŠ æ€»æ—¶é•¿ for page in pages: title = page[\u0026#39;part\u0026#39;] # è·å–è§†é¢‘çš„æ ‡é¢˜ duration = page[\u0026#39;duration\u0026#39;] # è·å–è§†é¢‘çš„æ—¶é•¿ï¼ˆå•ä½ä¸ºç§’ï¼‰ # è½¬æ¢æ—¶é•¿ä¸ºåˆ†:ç§’æ ¼å¼ formatted_duration = convert_seconds_to_minutes_seconds_format(duration) # æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ—¶é•¿ print(f\u0026#34;æ ‡é¢˜: {title}, æ—¶é•¿: {formatted_duration}\u0026#34;) #print(formatted_duration) # ç´¯åŠ æ—¶é•¿ total_duration_seconds += duration def convert_seconds_to_time_format(seconds): # è®¡ç®—å°æ—¶ hours = seconds // 3600 # è®¡ç®—åˆ†é’Ÿ minutes = (seconds % 3600) // 60 # è®¡ç®—å‰©ä½™ç§’æ•° seconds = seconds % 60 # è¿”å›æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å°æ—¶ã€åˆ†é’Ÿã€ç§’éƒ½æ˜¯ä¸¤ä½æ•° return f\u0026#34;{hours:02}:{minutes:02}:{seconds:02}\u0026#34; # 5. è®¡ç®—æ€»æ—¶é•¿å¹¶è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼ total_formatted_duration = convert_seconds_to_time_format(total_duration_seconds) print(f\u0026#34;\\næ‰€æœ‰è§†é¢‘çš„æ€»æ—¶é•¿: {total_formatted_duration}\u0026#34;) ","date":"1 March 2025","externalUrl":null,"permalink":"/posts/other/%E7%88%AC%E5%8F%96%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF%E5%92%8C%E6%A0%87%E9%A2%98/","section":"Posts","summary":"","title":"çˆ¬å–å“”å“©å“”å“©è§†é¢‘æ—¶é•¿å’Œæ ‡é¢˜","type":"posts"},{"content":" ä»£ç  # import urllib.request import gzip import io from lxml import etree import json import jsonpath # 1.è·å–ç½‘é¡µæºç  # è¯·æ±‚åœ°å€ url = \u0026#39;https://www.bilibili.com/video/BV1Es4y1q7Bf/?spm_id_from=333.788.comment.all.click\u0026amp;vd_source=3f0b4e269bbcd37b2419b130c0a77513\u0026#39; # è¯·æ±‚å¤´ headers = { \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36\u0026#39;, \u0026#39;Referer\u0026#39;: \u0026#39;https://www.bilibili.com/\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\u0026#39;, \u0026#39;Accept-Language\u0026#39;: \u0026#39;en-US,en;q=0.5\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39;, \u0026#39;Upgrade-Insecure-Requests\u0026#39;: \u0026#39;1\u0026#39;, \u0026#39;TE\u0026#39;: \u0026#39;Trailers\u0026#39; } # è¯·æ±‚å¯¹è±¡å®šåˆ¶ request = urllib.request.Request(url=url, headers=headers) # æ¨¡æ‹Ÿæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ response = urllib.request.urlopen(request) # è¯»å–å“åº”çš„å†…å®¹ content_bytes = response.read() # ä»å“åº”ä¸­è¯»å–çš„å­—èŠ‚æ•°æ® # å“åº”å†…å®¹æ˜¯å‹ç¼©çš„ï¼Œéœ€è¦è§£å‹ï¼Œå°†å‹ç¼©çš„å­—èŠ‚æ•°æ®è§£å‹å¹¶è§£ç æˆUTF-8ç¼–ç çš„å­—ç¬¦ä¸² content_io = io.BytesIO(content_bytes) # åˆ›å»ºäº†ä¸€ä¸ªio.BytesIOå¯¹è±¡ï¼Œç”¨äºå°†å­—èŠ‚æ•°æ®åŒ…è£…æˆç±»ä¼¼æ–‡ä»¶å¯¹è±¡çš„å½¢å¼ # ä½¿ç”¨gzip.GzipFileæ¥è§£å‹ç¼©æ•°æ®ï¼Œmode=\u0026#39;rb\u0026#39;æŒ‡å®šä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å– with gzip.GzipFile(fileobj=content_io, mode=\u0026#39;rb\u0026#39;) as f: content = f.read().decode(\u0026#39;utf-8\u0026#39;) # # å°†ç½‘é¡µæºç ä¿å­˜åˆ°æ–‡ä»¶â€œbç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.htmlâ€ä¸­ with open(\u0026#39;bç«™è§†é¢‘æ ‡é¢˜çš„è·å–ï¼ˆxpathï¼‰.html\u0026#39;, \u0026#39;w\u0026#39;, encoding=\u0026#39;UTF-8\u0026#39;) as fp: fp.write(content) # 2.è·å–è§†é¢‘æ ‡é¢˜å’Œæ—¶é•¿ # ï¼ˆ1ï¼‰å¤„ç†å˜æˆjsonæ•°æ® # è§£ææœåŠ¡å™¨å“åº”çš„æ–‡ä»¶ etree.HTML tree = etree.HTML(content) # è·å–æƒ³è¦çš„æ•°æ® the_data = tree.xpath(\u0026#39;/html/head[@itemprop=\u0026#34;video\u0026#34;]/script[5]/text()\u0026#39;)[0] # ç”±äºtree.xpathè¿”å›çš„æ˜¯åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨åˆ‡ç‰‡[0]å°†å®ƒå–å‡ºæ¥ the_json_data = the_data.split(\u0026#39;__=\u0026#39;)[1].split(\u0026#39;;(function\u0026#39;)[0] # ï¼ˆ2ï¼‰å¤„ç†jsonæ•°æ®ï¼Œå¾—åˆ°è§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ # ä½¿ç”¨jsonpathè§£æ video_data = json.loads(the_json_data) pages = video_data[\u0026#39;videoData\u0026#39;][\u0026#39;pages\u0026#39;] # 3. å®šä¹‰ä¸€ä¸ªè½¬æ¢ç§’æ•°ä¸ºåˆ†:ç§’æ ¼å¼çš„å‡½æ•° def convert_seconds_to_minutes_seconds_format(seconds): minutes = seconds // 60 seconds = seconds % 60 return f\u0026#34;{minutes:02}:{seconds:02}\u0026#34; # 4. æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ ‡é¢˜å’Œæ—¶é•¿ï¼Œå¹¶ç´¯åŠ æ€»æ—¶é•¿ total_duration_seconds = 0 # ç”¨äºç´¯åŠ æ€»æ—¶é•¿ for page in pages: title = page[\u0026#39;part\u0026#39;] # è·å–è§†é¢‘çš„æ ‡é¢˜ duration = page[\u0026#39;duration\u0026#39;] # è·å–è§†é¢‘çš„æ—¶é•¿ï¼ˆå•ä½ä¸ºç§’ï¼‰ # è½¬æ¢æ—¶é•¿ä¸ºåˆ†:ç§’æ ¼å¼ formatted_duration = convert_seconds_to_minutes_seconds_format(duration) # æ‰“å°æ¯ä¸ªè§†é¢‘çš„æ—¶é•¿ print(f\u0026#34;æ ‡é¢˜: {title}, æ—¶é•¿: {formatted_duration}\u0026#34;) #print(formatted_duration) # ç´¯åŠ æ—¶é•¿ total_duration_seconds += duration def convert_seconds_to_time_format(seconds): # è®¡ç®—å°æ—¶ hours = seconds // 3600 # è®¡ç®—åˆ†é’Ÿ minutes = (seconds % 3600) // 60 # è®¡ç®—å‰©ä½™ç§’æ•° seconds = seconds % 60 # è¿”å›æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å°æ—¶ã€åˆ†é’Ÿã€ç§’éƒ½æ˜¯ä¸¤ä½æ•° return f\u0026#34;{hours:02}:{minutes:02}:{seconds:02}\u0026#34; # 5. è®¡ç®—æ€»æ—¶é•¿å¹¶è½¬æ¢ä¸ºæ—¶:åˆ†:ç§’æ ¼å¼ total_formatted_duration = convert_seconds_to_time_format(total_duration_seconds) print(f\u0026#34;\\næ‰€æœ‰è§†é¢‘çš„æ€»æ—¶é•¿: {total_formatted_duration}\u0026#34;) ","date":"1 March 2025","externalUrl":null,"permalink":"/posts/%E7%88%AC%E5%8F%96%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF%E5%92%8C%E6%A0%87%E9%A2%98/","section":"Posts","summary":"","title":"çˆ¬å–å“”å“©å“”å“©è§†é¢‘æ—¶é•¿å’Œæ ‡é¢˜","type":"posts"},{"content":"","date":"1 March 2025","externalUrl":null,"permalink":"/categories/%E6%9D%82%E9%A1%B9/","section":"Categories","summary":"","title":"æ‚é¡¹","type":"categories"},{"content":"ä½ å¥½ï¼æˆ‘æ˜¯ä¸€åè®¡ç®—æœºä¸“ä¸š, å…·èº«æ™ºèƒ½æ–¹å‘çš„åœ¨è¯»ç¡•å£«ç ”ç©¶ç”Ÿï¼Œ ä»¥æœºæ¢°è‡‚ä»¿çœŸå¼€å‘ã€å¤§æ¨¡å‹é«˜å±‚ä»»åŠ¡è§„åˆ’ä¸ºä¸»ï¼Œ æœ‰æ—¶ä¹Ÿä¼šå†™ä¸‹ä¸€äº›æˆ‘çš„æ‚è°ˆä¸éšæƒ³ã€‚ ç¬”è®°ä¸»è¦åœ¨è¯­é›€å¹³å°è®°å½•ï¼Œæ¬¢è¿å…³æ³¨å¯¼èˆªæ æˆ‘çš„ç›¸å…³è”ç³»æ–¹å¼ã€‚\næ¬¢è¿ä¸æˆ‘è”ç³»ï¼Œæˆ‘çš„ä¸ªäººé‚®ç®±æ˜¯: misdazzling01@gmail.com ç»å†å’Œé¡¹ç›® # voxPoserå¤ç° 2024-07 voxPoser è§£å†³å®˜æ–¹ä»“åº“éƒ¨ç½²çš„bugï¼šVoxPoser: Composable 3D Value Maps for Robotic Manipulation with Language Models å¾®ä¿¡å…¬ä¼—å·æ¥å…¥chatgpt 2023-09 chatgpt-wechat ä¸ºä½ çš„å¾®ä¿¡å…¬ä¼—å·æ¥å…¥chatgptï¼Œå…æœåŠ¡å™¨ å¼€æºé¡¹ç›® # misDazzling/VoxPoser å¤ç°VoxPoser HTML 14 3 misDazzling/chatgpt-wechat ä¸ºä½ çš„å¾®ä¿¡å…¬ä¼—å·æ¥å…¥chatgptï¼Œå…æœåŠ¡å™¨ï¼Œåªéœ€APIkeyã€‚ JavaScript 11 3 ","externalUrl":null,"permalink":"/about/","section":"æ¬¢è¿æ¥åˆ° Blowfish! ğŸ‰","summary":"","title":"About Me","type":"page"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]